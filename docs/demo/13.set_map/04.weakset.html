<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>WeakSet</title>
</head>
<body>
<script>

var ws = new WeakSet();
// ws.add(1);  // TypeError
// ws.add(Symbol()) // TypeError

var a = [[1,3],[2,4]];
var ws2 = new WeakSet(a);
console.log(ws2);


var ws3 = new WeakSet();
var foo = {};
var bar = {};

ws3.add(window);
ws3.add(foo);

console.log(ws3.has(window));       // true
console.log(ws3.has(bar));          // false

ws3.delete(window);
console.log(ws3.has(window));   // false
console.log(ws3.size);          // undefined
console.log(ws3.forEach);       // undefined


// 应用
const foos = new WeakSet()
class Foo {
  constructor() {
    foos.add(this)
  }
  method () {
    if (!foos.has(this)) {
      throw new TypeError('Foo.prototype.method 只能在Foo的实例上调用！');
    }
  }
}











</script>
</body>
</html>